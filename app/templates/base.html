<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Go Slides{% endblock %} | {{ event_theme }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#1BA3A8',
            accent: '#F4B23C',
            bg: '#F5F7FA',
          },
          fontFamily: {
            heading: ['Poppins', 'sans-serif'],
            body: ['Inter', 'sans-serif'],
          },
          boxShadow: {
            'soft': '0 4px 14px 0 rgba(0, 0, 0, 0.08)',
            'card': '0 4px 20px rgba(0, 0, 0, 0.06)',
          },
        },
      },
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    h1, h2, h3, h4, .font-heading { font-family: 'Poppins', sans-serif; }
    .nav-active { color: #1BA3A8; font-weight: 600; }
    #mobileMenu.hidden { display: none; }
    #mobileMenu:not(.hidden) { display: block; }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body class="min-h-screen bg-bg text-gray-800 font-body antialiased">
  {% block nav %}
  <header class="bg-white shadow-soft sticky top-0 z-50">
    <nav class="max-w-6xl mx-auto px-4 sm:px-6 py-4 flex items-center justify-between">
      <a href="{{ url_for('public.index') }}" class="flex items-center gap-2 font-heading font-bold text-xl text-primary">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Go Slides" class="h-12 w-auto inline-block align-middle" loading="lazy">
      </a>
      <button id="mobileMenuBtn" class="md:hidden text-gray-600 hover:text-primary focus:outline-none">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
      </button>
      <div id="mobileMenu" class="flex-col md:flex md:flex-row md:items-center gap-4 md:gap-8 absolute top-full left-0 right-0 w-full bg-white border-t shadow-soft p-4 md:relative md:top-auto md:left-auto md:right-auto md:w-auto md:bg-transparent md:border-0 md:shadow-none md:p-0 md:px-6 md:flex">
        <a href="{{ url_for('public.index') }}" class="{% if request.endpoint == 'public.index' %}nav-active{% else %}text-gray-600 hover:text-primary{% endif %} transition block md:inline mx-2 md:mx-4">Beranda</a>
        <a href="{{ url_for('public.events') }}" class="{% if request.endpoint == 'public.events' %}nav-active{% else %}text-gray-600 hover:text-primary{% endif %} transition block md:inline mx-2 md:mx-4">Acara</a>
        <a href="{{ url_for('public.about') }}" class="{% if request.endpoint == 'public.about' %}nav-active{% else %}text-gray-600 hover:text-primary{% endif %} transition block md:inline mx-2 md:mx-4">Tentang</a>
        <a href="{{ url_for('public.contact') }}" class="{% if request.endpoint == 'public.contact' %}nav-active{% else %}text-gray-600 hover:text-primary{% endif %} transition block md:inline mx-2 md:mx-4">Kontak</a>
        {% if current_user.is_authenticated %}
        <a href="{{ url_for('admin.dashboard') }}" class="{% if 'admin' in request.endpoint %}nav-active{% else %}text-gray-600 hover:text-primary{% endif %} font-medium transition block md:inline md:mr-2">Admin</a>
        <a href="{{ url_for('admin.logout') }}" class="bg-primary text-white px-4 py-2 rounded-lg font-medium hover:opacity-90 transition block text-center md:inline md:ml-2">Keluar</a>
        {% else %}
        <a href="{{ url_for('admin.login') }}" class="bg-primary text-white px-4 py-2 rounded-lg font-medium hover:opacity-90 transition block text-center md:inline">Masuk</a>
        {% endif %}
      </div>
    </nav>
  </header>
  <script>
    const menuBtn = document.getElementById('mobileMenuBtn');
    const menu = document.getElementById('mobileMenu');
    function handleResize() {
      if (window.innerWidth >= 768) {
        menu.classList.remove('hidden');
      } else {
        menu.classList.add('hidden');
      }
    }
    menuBtn?.addEventListener('click', function() {
      if (window.innerWidth < 768) {
        menu.classList.toggle('hidden');
      }
    });
    window.addEventListener('resize', handleResize);
    // Ensure correct state on load
    handleResize();
  </script>
  {% endblock %}

  <main class="max-w-6xl mx-auto px-4 sm:px-6 py-8">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      <div class="mb-6 space-y-2">
        {% for category, message in messages %}
        <div class="rounded-lg px-4 py-3 text-sm font-medium
          {% if category == 'success' %}bg-green-100 text-green-800
          {% elif category == 'error' %}bg-red-100 text-red-800
          {% elif category == 'warning' %}bg-amber-100 text-amber-800
          {% else %}bg-blue-100 text-blue-800{% endif %}">
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>

  <footer class="mt-16 border-t border-gray-200 bg-white py-8">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 text-center text-gray-500 text-sm">
      <p class="font-heading font-semibold text-primary">Go Slides</p>
      <p>{{ event_theme }}</p>
    </div>
  </footer>
  {% block scripts %}{% endblock %}
</body>
</html>

{% extends "admin/base_admin.html" %}
{% block admin_content %}
<nav class="text-sm text-gray-500 mb-6">
  <a href="{{ url_for('admin.years_list') }}" class="hover:text-primary">Tahun</a>
  <span class="mx-2">/</span>
  <span class="text-gray-800">{{ year.name }}</span>
</nav>
<h1 class="font-heading font-bold text-2xl text-gray-900 mb-6">Acara â€“ {{ year.name }}</h1>
<a href="{{ url_for('admin.activity_new', year_id=year.id) }}" class="inline-flex items-center gap-2 bg-primary text-white px-5 py-2.5 rounded-xl font-medium hover:opacity-90 mb-6">+ Tambah acara</a>

<div class="bg-white rounded-2xl shadow-card border border-gray-100 overflow-hidden">
  <table class="w-full">
    <thead class="bg-bg border-b border-gray-200">
      <tr>
        <th class="text-left py-3 px-4 font-heading font-semibold text-gray-800">Judul</th>
        <th class="text-left py-3 px-4 font-heading font-semibold text-gray-800">Tipe</th>
        <th class="text-left py-3 px-4 font-heading font-semibold text-gray-800">Status</th>
        <th class="text-left py-3 px-4 font-heading font-semibold text-gray-800">Pendaftar</th>
        <th class="text-right py-3 px-4 font-heading font-semibold text-gray-800">Aksi</th>
      </tr>
    </thead>
    <tbody>
      {% for act in activities %}
      <tr class="border-b border-gray-100 hover:bg-bg/50">
        <td class="py-3 px-4 font-medium">{{ act.title }}</td>
        <td class="py-3 px-4 text-gray-600">{{ act.type|replace('-', ' ')|title }}</td>
        <td class="py-3 px-4">
          <span class="inline-block px-3 py-1 rounded-full text-xs font-medium
            {% if act.status == 'open' %}bg-green-100 text-green-800
            {% elif act.status == 'upcoming' %}bg-amber-100 text-amber-800
            {% else %}bg-gray-100 text-gray-600{% endif %}">
            {% if act.status == 'open' %}Terbuka{% elif act.status == 'upcoming' %}Segera{% else %}Ditutup{% endif %}
          </span>
        </td>
        <td class="py-3 px-4">
          <a href="{{ url_for('admin.registrants_list', activity_id=act.id) }}" class="text-primary hover:underline">
            {{ act.registrants.count() }}{% if act.quota %} / {{ act.quota }}{% endif %}
          </a>
        </td>
        <td class="py-3 px-4 text-right">
          <a href="{{ url_for('public.competition_detail', activity_id=act.id) }}" class="text-gray-600 text-sm hover:text-primary" target="_blank">Lihat</a>
          <span class="mx-2 text-gray-300">|</span>
          <a href="{{ url_for('admin.activity_gallery', activity_id=act.id) }}" class="text-primary text-sm font-medium hover:underline">Galeri</a>
          <span class="mx-2 text-gray-300">|</span>
          <a href="{{ url_for('admin.activity_edit', activity_id=act.id) }}" class="text-primary text-sm font-medium hover:underline">Ubah</a>
          <span class="mx-2 text-gray-300">|</span>
          <form method="post" action="{{ url_for('admin.activity_delete', activity_id=act.id) }}" class="inline" onsubmit="return confirm('Hapus acara ini?');">
            <button type="submit" class="text-red-600 text-sm font-medium hover:underline">Hapus</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% if not activities %}
  <p class="p-8 text-gray-500 text-center">Belum ada acara. <a href="{{ url_for('admin.activity_new', year_id=year.id) }}" class="text-primary font-medium">Tambah acara</a></p>
  {% endif %}
</div>
{% endblock %}
